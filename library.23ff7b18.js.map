{"mappings":"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","sources":["src/library.js","src/js/renderMarkupFilmoteka/onClickLogoLibrary.js","src/js/renderMarkupLibrary/renderMarkupLibraryQ.js","src/js/renderMarkupLibrary/renderMarkupLibraryW.js","src/js/modals/modal-trailer-test.js"],"sourcesContent":["import { getRefs } from './js/refs';\nimport { SStorage } from './js/storage/sessionStorage';\nimport { onClickLogoLibrary } from './js/renderMarkupFilmoteka/onClickLogoLibrary';\nimport { changeMode } from './js/changeMode/changeMode';\nimport { buttonUp } from './js/scroll/button-up';\nimport { loginModal } from './js/firebaseFilm/loginModal';\nimport { needRegisterShow, needRegisterHide } from './js/errors/needRegister';\nimport { renderMarkupLibraryQ } from './js/renderMarkupLibrary/renderMarkupLibraryQ';\nimport { renderMarkupLibraryW } from './js/renderMarkupLibrary/renderMarkupLibraryW';\nimport { libraryFirstOpen } from './js/renderMarkupLibrary/renderMarkupLibraryW';\nimport { renderLogin } from './js/renderLogin/renderLogin';\nimport './js/modals/modal-trailer-test';\n","import { SStorage } from \"../storage/sessionStorage\";\nimport { getRefs } from \"../refs\";\n\nconst sStorage = new SStorage();\nconst refs = getRefs();\n\nrefs.libraryLogo.addEventListener('click', onClickLogoLibrary)\nexport function onClickLogoLibrary() {\n    sStorage.clear();\n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\n\nconst refs = getRefs();\n\nrefs.libraryBtnQ.addEventListener('click', renderMarkupLibraryQ);\n\n\n// загрузка по кнопке очередь\nexport function renderMarkupLibraryQ() {\n    \n  refs.libraryBtnW.classList.remove('current-btn');\n  refs.libraryBtnQ.classList.add('current-btn');\n  if (fbFilmsAuth.isLogin) {\n    refs.library.classList.add('min-height');\n    spinnerOn();\n    emptyLibraryHide();\n    refs.library.innerHTML = '';\n    getFilmFromQU().then(({ films }) => {\n      \n      const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n        {\n          id,\n          posters,\n          title,\n          genres,\n          year,\n          vote,\n        }\n      ));\n      return filmsProperties;\n    }).then((filmsProperties) => {\n      if (filmsProperties.length !== 0) {\n        makeNewArrProp(filmsProperties);\n        spinnerOff();\n        renderMarkupList(refs.library, filmsProperties, markupCreating);\n      };\n      if (filmsProperties.length === 0) {\n        refs.library.classList.remove('min-height');\n        spinnerOff();\n        emptyLibraryShow();\n      };\n    });\n  };\n};\n\n\nasync function getFilmFromQU() {\n  if (fbFilmsAuth.isLogin) {\n      try {\n        const filmsQ = await fbFilmsData.getFilms(PLACE_Q);\n      if (filmsQ) {\n        return filmsQ;\n        };\n      } catch (err) {\n        console.log(err);\n    };\n  };\n};\n\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\nimport { renderLogin } from \"../renderLogin/renderLogin\";\nimport { authMy } from \"../firebaseFilm/fbInit\";\nimport { renderLogin } from \"../renderLogin/renderLogin\";\n\nconst refs = getRefs();\n\n\n\n// первая загрузка библиотеки\nexport function libraryFirstOpen() {\n    \n    if (fbFilmsAuth.isLogin) {\n        spinnerOn();\n        emptyLibraryHide();\n        refs.library.innerHTML = '';\n      getFilmFromW().then(({ films }) => {\n        const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n          {\n            id,\n            posters,\n            title,\n            genres,\n            year,\n            vote,\n          }\n        ));\n        return filmsProperties;\n      }).then((filmsProperties) => {\n        if (filmsProperties.length !== 0) {\n          makeNewArrProp(filmsProperties);\n          spinnerOff();\n          renderMarkupList(refs.library, filmsProperties, markupCreating);\n        };\n        if (filmsProperties.length === 0) {\n          spinnerOff();\n          emptyLibraryShow();\n        };\n      });\n  };\n};\n\n\n// загрузка по кнопке смотреть\n\nrefs.libraryBtnW.addEventListener('click', renderMarkupLibraryW);\n\nexport function renderMarkupLibraryW() {\n    \n  refs.libraryBtnW.classList.add('current-btn');\n  refs.libraryBtnQ.classList.remove('current-btn');\n  if (fbFilmsAuth.isLogin) {\n    refs.library.classList.add('min-height');\n    spinnerOn();\n    emptyLibraryHide();\n    refs.library.innerHTML = '';\n    getFilmFromW().then(({ films }) => {\n      const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n        {\n          id,\n          posters,\n          title,\n          genres,\n          year,\n          vote,\n        }\n      ));\n      return filmsProperties;\n    }).then((filmsProperties) => {\n      if (filmsProperties.length !== 0) {\n        makeNewArrProp(filmsProperties);\n        spinnerOff();\n        renderMarkupList(refs.library, filmsProperties, markupCreating);\n      };\n      if (filmsProperties.length === 0) {\n        refs.library.classList.remove('min-height');\n        spinnerOff();\n        emptyLibraryShow();\n      };\n    });\n  };\n};\n\n\nasync function getFilmFromW() {\n  if (fbFilmsAuth.isLogin) {\n      try {\n        const filmsW = await fbFilmsData.getFilms(PLACE_W);\n      if (filmsW) {\n        return filmsW;\n        };\n      } catch (err) {\n        console.log(err);\n    };\n  };\n};\n\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};\n\n","import TrailerApiService from './modal-trailer';\n\nconst trailerApiService = new TrailerApiService();\n\nlet youTubeBtn;\n\n// при открытии модального окна\n// youTubeBtn = document.querySelector('.testplayer');\n// youTubeBtn.addEventListener('click', onYouTubeBtnClick);\n\n// при закрытии модального окна\n// youTubeBtn.removeEventListener('click', onYouTubeBtnClick);\n\nexport function onYouTubeBtnClick(e) {\n  //   trailerApiService.filmID = Number(e.currentTarget.dataset.id);\n  trailerApiService.filmID = 593643; // временно\n  trailerApiService.showTrailer();\n}\n"],"names":["parcelRequire","$cP2Tz","$969dddec52c446cb$var$sStorage","SStorage","$4Nugj","getRefs","libraryLogo","addEventListener","clear","$bpxeT","$ceab52ceef72b8da$var$refs","$ceab52ceef72b8da$var$_getFilmFromQU","$parcel$interopDefault","$2TvXO","mark","_callee","filmsQ","$5uvrp","fbFilmsAuth","isLogin","$lRkNt","fbFilmsData","getFilms","PLACE_Q","_ctx","sent","console","log","t0","apply","this","arguments","libraryBtnQ","libraryBtnW","classList","remove","add","library","$ilDAP","spinnerOn","$g1n8n","emptyLibraryHide","innerHTML","$ceab52ceef72b8da$var$getFilmFromQU","then","param1","films","map","param","id","posters","title","genres","year","vote","filmsProperties","length","forEach","element","name","spinnerOff","$kyTY7","renderMarkupList","markupCreating","emptyLibraryShow","$e678080e9bbc4649$var$refs","$e678080e9bbc4649$var$getFilmFromW","$e678080e9bbc4649$var$_getFilmFromW","filmsW","PLACE_W","$e678080e9bbc4649$export$7db4f472cc9169d5","arr","param2","default"],"version":3,"file":"library.23ff7b18.js.map"}