var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a),a("krGWQ"),a("4aPXr");var r=a("4aPXr"),s=a("krGWQ");const i=new(0,r.SStorage);(0,s.getRefs)().libraryLogo.addEventListener("click",(function(){i.clear()})),a("2lP43"),a("3tw01"),a("cgCOF"),a("hJCi4");var o=a("hqPq9"),l=a("sgMsR"),c=(s=a("krGWQ"),a("gzWlL")),d=(c=a("gzWlL"),a("fK7aK")),u=(d=a("fK7aK"),a("4AmR3"));u=a("4AmR3");const g=(0,s.getRefs)();function p(){g.libraryBtnW.classList.remove("current-btn"),g.libraryBtnQ.classList.add("current-btn"),l.fbFilmsAuth.isLogin&&(g.library.classList.add("min-height"),(0,c.spinnerOn)(),(0,u.emptyLibraryHide)(),g.library.innerHTML="",async function(){if(l.fbFilmsAuth.isLogin)try{const e=await o.fbFilmsData.getFilms(o.PLACE_Q);if(e)return e}catch(e){console.log(e)}}().then((({films:e})=>e.map((({id:e,posters:t,title:n,genres:a,year:r,vote:s})=>({id:e,posters:t,title:n,genres:a,year:r,vote:s}))))).then((e=>{0!==e.length&&(e.forEach((e=>{1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])})),(0,c.spinnerOff)(),(0,d.renderMarkupList)(g.library,e,d.markupCreating)),0===e.length&&(g.library.classList.remove("min-height"),(0,c.spinnerOff)(),(0,u.emptyLibraryShow)())})))}g.libraryBtnQ.addEventListener("click",p);o=a("hqPq9"),l=a("sgMsR"),s=a("krGWQ"),c=a("gzWlL"),c=a("gzWlL"),d=a("fK7aK"),d=a("fK7aK"),u=a("4AmR3"),u=a("4AmR3");a("ihsYy"),a("7jxxg"),a("ihsYy");const m=(0,s.getRefs)();function h(){m.libraryBtnW.classList.add("current-btn"),m.libraryBtnQ.classList.remove("current-btn"),l.fbFilmsAuth.isLogin&&(m.library.classList.add("min-height"),(0,c.spinnerOn)(),(0,u.emptyLibraryHide)(),m.library.innerHTML="",async function(){if(l.fbFilmsAuth.isLogin)try{const e=await o.fbFilmsData.getFilms(o.PLACE_W);if(e)return e}catch(e){console.log(e)}}().then((({films:e})=>e.map((({id:e,posters:t,title:n,genres:a,year:r,vote:s})=>({id:e,posters:t,title:n,genres:a,year:r,vote:s}))))).then((e=>{0!==e.length&&(e.forEach((e=>{1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])})),(0,c.spinnerOff)(),(0,d.renderMarkupList)(m.library,e,d.markupCreating)),0===e.length&&(m.library.classList.remove("min-height"),(0,c.spinnerOff)(),(0,u.emptyLibraryShow)())})))}m.libraryBtnW.addEventListener("click",h),a("ihsYy");s=a("krGWQ");var f=a("4Dq8E");var b=a("lBdXx"),y=a("jrNhD");a("sgMsR");o=a("hqPq9");const v=new(0,a("6sNdw").default),L=(0,s.getRefs)(),w=new(0,f.default);let q=null,F=null;!function(){async function e(e){if(e.target.classList.contains("remove-from-watched")){await o.fbFilmsData.removeFilm(F,"WA");(0,y.addMod)(e.target,"watched"),h()}else if(e.target.classList.contains("add-to-watched")){const t=await w.getById(F);await o.fbFilmsData.writeTo(t,"WA");(0,y.removeMod)(e.target,"watched"),h(),e.target.nextSibling.classList.contains("remove-from-queue")&&(0,y.addMod)(e.target.nextSibling,"queue")}}async function t(e){if(e.target.classList.contains("remove-from-queue")){await o.fbFilmsData.removeFilm(F,"QU");(0,y.addMod)(e.target,"queue"),p()}else if(e.target.classList.contains("add-to-queue")){const t=await w.getById(F);await o.fbFilmsData.writeTo(t,"QU");(0,y.removeMod)(e.target,"queue"),p(),e.target.previousSibling.classList.contains("remove-from-watched")&&(0,y.addMod)(e.target.previousSibling,"watched")}}function n(e){s()}function a(e){"Escape"===e.key&&(s(),document.removeEventListener("keydown",a))}function r(e){e.target===e.currentTarget&&(s(),L.modal.removeEventListener("click",r))}function s(){document.body.classList.toggle("modal-open"),L.modal.classList.toggle("is_hidden")}function i(e){v.filmID=F,v.showTrailer(),n()}L.library.addEventListener("click",(function(n){const l=n.target.hasAttribute("data-id");if(F=n.target.dataset.id,n.target===n.currentTarget)return;if(!1===l)return;L.modalFilmWrapper.innerHTML="",document.addEventListener("keydown",a),L.modal.addEventListener("click",r),s(),w.getById(F).then((n=>{var a,r;q=n,a=L.modalFilmWrapper,r=function({title:e,vote:t,votes:n,popularity:a,original_title:r,genres:s,about:i,poster_path:o,posters:l,year:c}){const d=s.map((e=>e.name)).join(", ");return`<div class="modal-container">\n        <div class="poster-thumb">\n          <picture>\n              <source\n              srcset="\n              ${l[4].path} 1x,\n              ${l[5].path} 2x\n              "\n              media="(min-width: 1200px)"\n            />\n              <source\n              srcset="\n              ${l[3].path} 1x,\n              ${l[4].path} 2x\n              "\n              media="(min-width: 768px)"\n            />\n              <source\n              srcset="\n              ${l[3].path} 1x,\n              ${l[4].path} 2x\n              "\n              media="(max-width: 767px)"\n            />\n  \n            <img\n              class="movie-poster"\n              src="${l[3].path}"\n              alt="${e}"\n  \n              loading="lazy"\n            />\n          </picture>\n          <div class="trailer-overlay">\n          <button type="button" class="trailer-play-btn">\n          &#9655;\n              </button>\n          \n          </div>\n        </div>\n  \n        <div>\n          <table class="info">\n            <caption class="movie-title">\n            ${e.toUpperCase()}\n            </caption>\n            <tbody>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Vote / Votes</p>\n                </td>\n                <td class="description">\n                  <span class="vote">${t} </span> &nbsp;\n                  <span class="characteristic">/</span> ${n}\n                </td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Popularity</p>\n                </td>\n                <td class="description">${a}</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Original Title</p>\n                </td>\n                <td class="description">${r.toUpperCase()}</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Genre</p>\n                </td>\n                <td class="description">${d}</td>\n              </tr>\n            </tbody>\n          </table>\n          <h3 class="about">About</h3>\n          <p class="about-descr">\n            ${i}\n          </p>\n          <div class="buttons-wrapper">\n            <button\n              type="button"\n              class="button-modal add-to-watched"\n              data-action="add-to-watched"\n            >\n            add to watched</button\n            ><button\n              type="button"\n              class="button-modal add-to-queue"\n              data-action="add-to-queue"\n            >\n            add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n      `}(n),a.insertAdjacentHTML("beforeend",r);const s=L.modalFilmWrapper.querySelector(".add-to-watched"),l=L.modalFilmWrapper.querySelector(".add-to-queue");return L.modalFilmWrapper.querySelector(".trailer-play-btn").addEventListener("click",i),s.addEventListener("click",e),l.addEventListener("click",t),o.fbFilmsData.getFilmById(F)})).then((e=>{const t=L.modalFilmWrapper.querySelector(".add-to-watched"),n=L.modalFilmWrapper.querySelector(".add-to-queue");e&&e?.place&&(e.place==o.PLACE_W&&(0,y.removeMod)(t,"watched"),e.place==o.PLACE_Q&&(0,y.removeMod)(n,"queue"))})).catch(b.default)})),L.closeModalBtn.addEventListener("click",n)}();
//# sourceMappingURL=library.d428e570.js.map
