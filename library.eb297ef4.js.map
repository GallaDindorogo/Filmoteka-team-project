{"mappings":"iiBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,aAGME,EAAW,IAAI,EAAAD,EAAAE,WACR,EAAAC,EAAAC,WAERC,YAAYC,iBAAiB,SAC3B,WACHL,EAASM,O,0BCRb,IAAAC,EAAAT,EAAA,S,2HAUMU,G,cAAO,EAAAN,EAAAC,Y,SA+BEM,I,OAAAA,EAAfC,EAAAH,EAAA,CAAAG,EAAAC,GAAAC,MAAA,SAAAC,I,IAGcC,E,sEAFNC,EAAAC,YAAYC,QAAO,C,yCAECC,EAAAC,YAAYC,SAASF,EAAAG,S,YAAnCP,EAAKQ,EAAAC,MACJ,C,wCACAT,G,uDAGPU,QAAQC,IAAGH,EAAAI,I,0DARSC,MAAAC,KAAAC,U,CA7B5BrB,EAAKsB,YAAYzB,iBAAiB,SAE3B,WAELG,EAAKuB,YAAYC,UAAUC,OAAO,eAClCzB,EAAKsB,YAAYE,UAAUE,IAAI,gBAC/B,EAAAC,EAAAC,cACA,EAAAC,EAAAC,oBACA9B,EAAK+B,QAAQC,UAAY,G,kBAqBZ/B,EAAakB,MAAAC,KAAAC,U,CApB1BY,GAAgBC,MAAK,SAAAC,GAWnB,OAX2BA,EAAL7B,MACQ8B,KAAI,SAAAC,G,MAChC,CACEC,GAFmCD,EAAFC,GAGjCC,QAH4CF,EAAPE,QAIrCC,MAJmDH,EAALG,MAK9CC,OAL2DJ,EAANI,OAMrDC,KANiEL,EAAJK,KAO7DC,KAPuEN,EAAJM,K,OAWtET,MAAK,SAACU,GACQA,EAuBNC,SAAQ,SAAAC,GACa,IAA1BA,EAAQL,OAAOM,SACjBD,EAAQL,OAAS,CAACK,EAAQL,OAAO,GAAGO,OAER,IAA1BF,EAAQL,OAAOM,SACjBD,EAAQL,OAAS,CAACK,EAAQL,OAAO,GAAGO,KAAMF,EAAQL,OAAO,GAAGO,OAE1DF,EAAQL,OAAOM,OAAS,IAC1BD,EAAQL,OAAS,CAACK,EAAQL,OAAO,GAAGO,KAAMF,EAAQL,OAAO,GAAGO,KAAM,S,KA9BpE,EAAArB,EAAAsB,eACA,EAAAC,EAAAC,kBAAiBnD,EAAK+B,QAASa,EAAiBM,EAAAE,e","sources":["src/library.js","src/js/renderMarkupFilmoteka/onClickLogoLibrary.js","src/js/renderMarkupLibrary/renderMarkupLibraryQ.js"],"sourcesContent":["import { getRefs } from \"./js/refs\";\nimport { SStorage } from \"./js/storage/sessionStorage\";\nimport { onClickLogoLibrary } from \"./js/renderMarkupFilmoteka/onClickLogoLibrary\";\nimport { changeMode } from './js/changeMode/changeMode';\nimport { buttonUp } from './js/scroll/button-up';\nimport { renderMarkupLibraryQ } from \"./js/renderMarkupLibrary/renderMarkupLibraryQ\";\n","import { SStorage } from \"../storage/sessionStorage\";\nimport { getRefs } from \"../refs\";\n\nconst sStorage = new SStorage();\nconst refs = getRefs();\n\nrefs.libraryLogo.addEventListener('click', onClickLogoLibrary)\nexport function onClickLogoLibrary() {\n    sStorage.clear();\n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\n\nconst refs = getRefs();\n\nrefs.libraryBtnQ.addEventListener('click', renderMarkupLibraryQ);\n\nexport function renderMarkupLibraryQ() {\n    \n  refs.libraryBtnW.classList.remove('current-btn');\n  refs.libraryBtnQ.classList.add('current-btn');\n  spinnerOn();\n  emptyLibraryHide();\n  refs.library.innerHTML = '';\n  getFilmFromQU().then(({ films }) => {\n    const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n      {\n        id,\n        posters,\n        title,\n        genres,\n        year,\n        vote,\n      }\n    ));\n    return filmsProperties;\n  }).then((filmsProperties) => {\n    makeNewArrProp(filmsProperties);\n    spinnerOff();\n    renderMarkupList(refs.library, filmsProperties, markupCreating);\n    })\n};\n\n\nasync function getFilmFromQU() {\n    if (fbFilmsAuth.isLogin) {\n      try {\n        const films = await fbFilmsData.getFilms(PLACE_Q);\n      if (films) {\n        return films;\n      }\n      } catch (err) {\n        console.log(err);\n      }\n      \n  }\n};\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};"],"names":["parcelRequire","$cP2Tz","$969dddec52c446cb$var$sStorage","SStorage","$4Nugj","getRefs","libraryLogo","addEventListener","clear","$bpxeT","$ceab52ceef72b8da$var$refs","$ceab52ceef72b8da$var$_getFilmFromQU","$parcel$interopDefault","$2TvXO","mark","_callee","films","$5uvrp","fbFilmsAuth","isLogin","$lRkNt","fbFilmsData","getFilms","PLACE_Q","_ctx","sent","console","log","t0","apply","this","arguments","libraryBtnQ","libraryBtnW","classList","remove","add","$ilDAP","spinnerOn","$g1n8n","emptyLibraryHide","library","innerHTML","$ceab52ceef72b8da$var$getFilmFromQU","then","param1","map","param","id","posters","title","genres","year","vote","filmsProperties","forEach","element","length","name","spinnerOff","$kyTY7","renderMarkupList","markupCreating"],"version":3,"file":"library.eb297ef4.js.map"}