{"mappings":"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","sources":["src/library.js","src/js/renderMarkupFilmoteka/onClickLogoLibrary.js","src/js/renderMarkupLibrary/renderMarkupLibraryQ.js","src/js/renderMarkupLibrary/renderMarkupLibraryW.js"],"sourcesContent":["import { getRefs } from './js/refs';\nimport { SStorage } from './js/storage/sessionStorage';\nimport { onClickLogoLibrary } from './js/renderMarkupFilmoteka/onClickLogoLibrary';\nimport { changeMode } from './js/changeMode/changeMode';\nimport { buttonUp } from './js/scroll/button-up';\nimport { renderMarkupLibraryQ } from \"./js/renderMarkupLibrary/renderMarkupLibraryQ\";\nimport { renderMarkupLibraryW } from \"./js/renderMarkupLibrary/renderMarkupLibraryW\";\nimport { libraryFirstOpen } from \"./js/renderMarkupLibrary/renderMarkupLibraryW\";","import { SStorage } from \"../storage/sessionStorage\";\nimport { getRefs } from \"../refs\";\n\nconst sStorage = new SStorage();\nconst refs = getRefs();\n\nrefs.libraryLogo.addEventListener('click', onClickLogoLibrary)\nexport function onClickLogoLibrary() {\n    sStorage.clear();\n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\n\nconst refs = getRefs();\n\nrefs.libraryBtnQ.addEventListener('click', renderMarkupLibraryQ);\n\n\n// загрузка по кнопке очередь\nexport function renderMarkupLibraryQ() {\n    \n  refs.libraryBtnW.classList.remove('current-btn');\n  refs.libraryBtnQ.classList.add('current-btn');\n  if (fbFilmsAuth.isLogin) {\n    spinnerOn();\n    emptyLibraryHide();\n    refs.library.innerHTML = '';\n    getFilmFromQU().then(({ films }) => {\n      const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n        {\n          id,\n          posters,\n          title,\n          genres,\n          year,\n          vote,\n        }\n      ));\n      return filmsProperties;\n    }).then((filmsProperties) => {\n      makeNewArrProp(filmsProperties);\n      spinnerOff();\n      renderMarkupList(refs.library, filmsProperties, markupCreating);\n    })\n  }\n};\n\n\nasync function getFilmFromQU() {\n  if (fbFilmsAuth.isLogin) {\n      try {\n        const filmsQ = await fbFilmsData.getFilms(PLACE_Q);\n      if (filmsQ) {\n        return filmsQ;\n      }\n      } catch (err) {\n        console.log(err);\n      }\n      \n  }\n};\n\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\nimport { renderLogin } from \"../renderLogin/renderLogin\";\nimport { authMy } from \"../firebaseFilm/fbInit\";\n\nconst refs = getRefs();\n\n// первая загрузка библиотеки\nexport function libraryFirstOpen() {\n    if (fbFilmsAuth.isLogin) {\n        spinnerOn();\n        emptyLibraryHide();\n        refs.library.innerHTML = '';\n        getFilmFromW().then(({ films }) => {\n            const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n                {\n                    id,\n                    posters,\n                    title,\n                    genres,\n                    year,\n                    vote,\n                }\n            ));\n            return filmsProperties;\n        }).then((filmsProperties) => {\n            makeNewArrProp(filmsProperties);\n            spinnerOff();\n            renderMarkupList(refs.library, filmsProperties, markupCreating);\n        })\n    }\n    \n};\n\n\n// загрузка по кнопке смотреть\nlibraryFirstOpen();\n\nrefs.libraryBtnW.addEventListener('click', renderMarkupLibraryW);\n\nexport function renderMarkupLibraryW() {\n    \n  refs.libraryBtnW.classList.add('current-btn');\n  refs.libraryBtnQ.classList.remove('current-btn');\n  if (fbFilmsAuth.isLogin) {\n    spinnerOn();\n    emptyLibraryHide();\n    refs.library.innerHTML = '';\n    getFilmFromW().then(({ films }) => {\n      const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n        {\n          id,\n          posters,\n          title,\n          genres,\n          year,\n          vote,\n        }\n      ));\n      return filmsProperties;\n    }).then((filmsProperties) => {\n      makeNewArrProp(filmsProperties);\n      spinnerOff();\n      renderMarkupList(refs.library, filmsProperties, markupCreating);\n    })\n  }\n};\n\n\nasync function getFilmFromW() {\n  if (fbFilmsAuth.isLogin) {\n      try {\n        const filmsW = await fbFilmsData.getFilms(PLACE_W);\n      if (filmsW) {\n        return filmsW;\n      }\n      } catch (err) {\n        console.log(err);\n      }\n      \n  }\n};\n\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};\n\nauthMy.onAuthStateChanged((user) => \nconsole.log(user.displayName))"],"names":["parcelRequire","$4aPXr","$f81308d381ecbf7f$var$sStorage","SStorage","$krGWQ","getRefs","libraryLogo","addEventListener","clear","$hqPq9","$b07baa24b08a6139$var$refs","libraryBtnQ","libraryBtnW","classList","remove","add","$sgMsR","fbFilmsAuth","isLogin","$gzWlL","spinnerOn","$4AmR3","emptyLibraryHide","library","innerHTML","async","filmsQ","fbFilmsData","getFilms","PLACE_Q","err","console","log","$b07baa24b08a6139$var$getFilmFromQU","then","films","map","id","posters","title","genres","year","vote","filmsProperties","forEach","element","length","name","spinnerOff","$fK7aK","renderMarkupList","markupCreating","$d8392f7a529c17a5$var$refs","$d8392f7a529c17a5$var$getFilmFromW","filmsW","PLACE_W","$d8392f7a529c17a5$export$7db4f472cc9169d5","arr","$7jxxg","authMy","onAuthStateChanged","user","displayName"],"version":3,"file":"library.af25c940.js.map"}