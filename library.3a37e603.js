var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r),r("krGWQ"),r("4aPXr");var a=r("4aPXr"),s=r("krGWQ");const i=new(0,a.SStorage);(0,s.getRefs)().libraryLogo.addEventListener("click",(function(){i.clear()})),r("2lP43"),r("3tw01"),r("cgCOF"),r("hJCi4");var o=r("hqPq9"),l=r("sgMsR"),c=(s=r("krGWQ"),r("gzWlL")),d=(c=r("gzWlL"),r("fK7aK")),m=(d=r("fK7aK"),r("4AmR3"));m=r("4AmR3");const u=(0,s.getRefs)();u.libraryBtnQ.addEventListener("click",(function(){u.libraryBtnW.classList.remove("current-btn"),u.libraryBtnQ.classList.add("current-btn"),l.fbFilmsAuth.isLogin&&(u.library.classList.add("min-height"),(0,c.spinnerOn)(),(0,m.emptyLibraryHide)(),u.library.innerHTML="",async function(){if(l.fbFilmsAuth.isLogin)try{const e=await o.fbFilmsData.getFilms(o.PLACE_Q);if(e)return e}catch(e){console.log(e)}}().then((({films:e})=>e.map((({id:e,posters:t,title:n,genres:r,year:a,vote:s})=>({id:e,posters:t,title:n,genres:r,year:a,vote:s}))))).then((e=>{0!==e.length&&(e.forEach((e=>{1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])})),(0,c.spinnerOff)(),(0,d.renderMarkupList)(u.library,e,d.markupCreating)),0===e.length&&(u.library.classList.remove("min-height"),(0,c.spinnerOff)(),(0,m.emptyLibraryShow)())})))}));o=r("hqPq9"),l=r("sgMsR"),s=r("krGWQ"),c=r("gzWlL"),c=r("gzWlL"),d=r("fK7aK"),d=r("fK7aK"),m=r("4AmR3"),m=r("4AmR3");r("ihsYy"),r("7jxxg"),r("ihsYy");const g=(0,s.getRefs)();async function p(){if(l.fbFilmsAuth.isLogin)try{const e=await o.fbFilmsData.getFilms(o.PLACE_W);if(e)return e}catch(e){console.log(e)}}function f(e){return e.forEach((e=>{1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])}))}g.libraryBtnW.addEventListener("click",(function(){g.libraryBtnW.classList.add("current-btn"),g.libraryBtnQ.classList.remove("current-btn"),l.fbFilmsAuth.isLogin&&(g.library.classList.add("min-height"),(0,c.spinnerOn)(),(0,m.emptyLibraryHide)(),g.library.innerHTML="",p().then((({films:e})=>e.map((({id:e,posters:t,title:n,genres:r,year:a,vote:s})=>({id:e,posters:t,title:n,genres:r,year:a,vote:s}))))).then((e=>{0!==e.length&&(f(e),(0,c.spinnerOff)(),(0,d.renderMarkupList)(g.library,e,d.markupCreating)),0===e.length&&(g.library.classList.remove("min-height"),(0,c.spinnerOff)(),(0,m.emptyLibraryShow)())})))})),r("ihsYy");s=r("krGWQ");var h=r("4Dq8E");var b=r("lBdXx");r("jrNhD");o=r("hqPq9");const y=new(0,r("6sNdw").default),v=(0,s.getRefs)(),L=new(0,h.default);let w=null,k=null;!function(){function e(){document.body.classList.toggle("modal-open"),v.modal.classList.toggle("is_hidden")}function t(e){y.filmID=k,y.showTrailer(),a()}async function n(e){if(e.target.classList.contains("remove-from-watched")){const t=await L.getById(k);console.log("film1 =",t);const n=await o.fbFilmsData.writeTo(t,"WA");console.log("result = ",n),e.target.textContent="film removed from watched",e.target.setAttribute("disabled","")}}async function r(e){if(e.target.classList.contains("remove-from-queue")){const t=await L.getById(k);console.log("film1 =",t);const n=await o.fbFilmsData.writeTo(t,"QU");console.log("result = ",n),e.target.textContent="film removed from queue",e.target.setAttribute("disabled","")}}function a(t){e()}function s(t){"Escape"===t.key&&(e(),document.removeEventListener("keydown",s))}function i(t){t.target===t.currentTarget&&(e(),v.modal.removeEventListener("click",i))}v.library.addEventListener("click",(function(a){const o=a.target.hasAttribute("data-id");if(k=a.target.dataset.id,a.target===a.currentTarget)return;if(!1===o)return;v.modalFilmWrapper.innerHTML="",document.addEventListener("keydown",s),v.modal.addEventListener("click",i),e(),L.getById(k).then((e=>{var a,s;w=e,a=v.modalFilmWrapper,s=function({title:e,vote:t,votes:n,popularity:r,original_title:a,genres:s,about:i,poster_path:o,posters:l,year:c}){const d=s.map((e=>e.name)).join(", ");return`<div class="modal-container">\n        <div class="poster-thumb">\n          <picture>\n              <source\n              srcset="\n              ${l[4].path} 1x,\n              ${l[5].path} 2x\n              "\n              media="(min-width: 1200px)"\n            />\n              <source\n              srcset="\n              ${l[3].path} 1x,\n              ${l[4].path} 2x\n              "\n              media="(min-width: 768px)"\n            />\n              <source\n              srcset="\n              ${l[3].path} 1x,\n              ${l[4].path} 2x\n              "\n              media="(max-width: 767px)"\n            />\n  \n            <img\n              class="movie-poster"\n              src="${l[3].path}"\n              alt="${e}"\n  \n              loading="lazy"\n            />\n          </picture>\n          <div class="trailer-overlay">\n          <button type="button" class="trailer-play-btn">\n          &#9655;\n              </button>\n          \n          </div>\n        </div>\n  \n        <div>\n          <table class="info">\n            <caption class="movie-title">\n            ${e.toUpperCase()}\n            </caption>\n            <tbody>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Vote / Votes</p>\n                </td>\n                <td class="description">\n                  <span class="vote">${t} </span> &nbsp;\n                  <span class="characteristic">/</span> ${n}\n                </td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Popularity</p>\n                </td>\n                <td class="description">${r}</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Original Title</p>\n                </td>\n                <td class="description">${a.toUpperCase()}</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Genre</p>\n                </td>\n                <td class="description">${d}</td>\n              </tr>\n            </tbody>\n          </table>\n          <h3 class="about">About</h3>\n          <p class="about-descr">\n            ${i}\n          </p>\n          <div class="buttons-wrapper">\n            <button\n              type="button"\n              class="button-modal remove-from-watched"\n              data-action="add-to-watched"\n            >\n            remove from Watched</button\n            ><button\n              type="button"\n              class="button-modal remove-from-queue"\n              data-action="add-to-queue"\n            >\n            remove from queue\n            </button>\n          </div>\n        </div>\n      </div>\n      `}(e),a.insertAdjacentHTML("beforeend",s);const i=v.modalFilmWrapper.querySelector(".remove-from-watched"),o=v.modalFilmWrapper.querySelector(".remove-from-queue");v.modalFilmWrapper.querySelector(".trailer-play-btn").addEventListener("click",t),i.addEventListener("click",n),o.addEventListener("click",r)})).catch(b.default)})),v.closeModalBtn.addEventListener("click",a)}();new(0,r("6sNdw").default);
//# sourceMappingURL=library.3a37e603.js.map
