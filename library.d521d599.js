!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("4Nugj"),a("cP2Tz");var i=a("cP2Tz"),s=a("4Nugj"),c=new(0,i.SStorage);(0,s.getRefs)().libraryLogo.addEventListener("click",(function(){c.clear()})),a("KXFuB"),a("e3MQG"),a("cFCN7"),a("lx5Y0");var o=a("bpxeT"),l=a("2TvXO"),d=a("lRkNt"),u=a("5uvrp"),p=(s=a("4Nugj"),a("ilDAP")),f=(p=a("ilDAP"),a("kyTY7")),m=(f=a("kyTY7"),a("g1n8n")),g=(m=a("g1n8n"),(0,s.getRefs)());function b(){g.libraryBtnW.classList.remove("current-btn"),g.libraryBtnQ.classList.add("current-btn"),u.fbFilmsAuth.isLogin&&(g.library.classList.add("min-height"),(0,p.spinnerOn)(),(0,m.emptyLibraryHide)(),g.library.innerHTML="",function(){return v.apply(this,arguments)}().then((function(e){return e.films.map((function(e){return{id:e.id,posters:e.posters,title:e.title,genres:e.genres,year:e.year,vote:e.vote}}))})).then((function(e){0!==e.length&&(e.forEach((function(e){1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])})),(0,p.spinnerOff)(),(0,f.renderMarkupList)(g.library,e,f.markupCreating)),0===e.length&&(g.library.classList.remove("min-height"),(0,p.spinnerOff)(),(0,m.emptyLibraryShow)())})))}function v(){return(v=e(o)(e(l).mark((function t(){var n;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.fbFilmsAuth.isLogin){e.next=12;break}return e.prev=1,e.next=4,d.fbFilmsData.getFilms(d.PLACE_Q);case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}g.libraryBtnQ.addEventListener("click",b);o=a("bpxeT"),l=a("2TvXO"),d=a("lRkNt"),u=a("5uvrp"),s=a("4Nugj"),p=a("ilDAP"),p=a("ilDAP"),f=a("kyTY7"),f=a("kyTY7"),m=a("g1n8n"),m=a("g1n8n");a("4zSSb"),a("53Mtm"),a("4zSSb");var h=(0,s.getRefs)();function y(){h.libraryBtnW.classList.add("current-btn"),h.libraryBtnQ.classList.remove("current-btn"),u.fbFilmsAuth.isLogin&&(h.library.classList.add("min-height"),(0,p.spinnerOn)(),(0,m.emptyLibraryHide)(),h.library.innerHTML="",function(){return L.apply(this,arguments)}().then((function(e){return e.films.map((function(e){return{id:e.id,posters:e.posters,title:e.title,genres:e.genres,year:e.year,vote:e.vote}}))})).then((function(e){0!==e.length&&(e.forEach((function(e){1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])})),(0,p.spinnerOff)(),(0,f.renderMarkupList)(h.library,e,f.markupCreating)),0===e.length&&(h.library.classList.remove("min-height"),(0,p.spinnerOff)(),(0,m.emptyLibraryShow)())})))}function L(){return(L=e(o)(e(l).mark((function t(){var n;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.fbFilmsAuth.isLogin){e.next=12;break}return e.prev=1,e.next=4,d.fbFilmsData.getFilms(d.PLACE_W);case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}h.libraryBtnW.addEventListener("click",y),a("4zSSb");o=a("bpxeT"),l=a("2TvXO"),s=a("4Nugj");var x=a("aYHWX");var w=a("5ibPU"),k=a("4DLKi");a("5uvrp");d=a("lRkNt");var F=new(0,a("glS4B").default),T=(0,s.getRefs)(),E=new(0,x.default),A=null;!function(){function t(e){return n.apply(this,arguments)}function n(){return(n=e(o)(e(l).mark((function t(n){var r,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("remove-from-watched")){e.next=8;break}return e.next=3,d.fbFilmsData.removeFilm(A,"WA");case 3:e.sent,(0,k.addMod)(n.target,"watched"),y(),e.next=17;break;case 8:if(!n.target.classList.contains("add-to-watched")){e.next=17;break}return e.next=11,E.getById(A);case 11:return r=e.sent,e.next=14,d.fbFilmsData.writeTo(r,"WA");case 14:"WA"!==(null==(a=e.sent)?void 0:a.place)&&"WA"!==(null==a?void 0:a.place2)||(0,k.removeMod)(n.target,"watched"),y();case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function r(e){return a.apply(this,arguments)}function a(){return(a=e(o)(e(l).mark((function t(n){var r,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("remove-from-queue")){e.next=8;break}return e.next=3,d.fbFilmsData.removeFilm(A,"QU");case 3:e.sent,(0,k.addMod)(n.target,"queue"),b(),e.next=18;break;case 8:if(!n.target.classList.contains("add-to-queue")){e.next=18;break}return e.next=11,E.getById(A);case 11:return r=e.sent,e.next=14,d.fbFilmsData.writeTo(r,"QU");case 14:"QU"===(null==(a=e.sent)?void 0:a.place)||null==a||a.place2,(0,k.removeMod)(n.target,"queue"),b();case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function i(e){u()}function s(e){"Escape"===e.key&&(u(),document.removeEventListener("keydown",s))}function c(e){e.target===e.currentTarget&&(u(),T.modal.removeEventListener("click",c))}function u(){document.body.classList.toggle("modal-open"),T.modal.classList.toggle("is_hidden")}function p(e){F.filmID=A,F.showTrailer(),i()}T.library.addEventListener("click",(function(e){var n=e.target.hasAttribute("data-id");if(A=e.target.dataset.id,e.target===e.currentTarget)return;if(!1===n)return;T.modalFilmWrapper.innerHTML="",document.addEventListener("keydown",s),T.modal.addEventListener("click",c),u(),E.getById(A).then((function(e){var n,a,i,s,c,o,l,u,f,m,g,b;e,n=T.modalFilmWrapper,s=(i=e).title,c=i.vote,o=i.votes,l=i.popularity,u=i.original_title,f=i.genres,m=i.about,i.poster_path,g=i.posters,i.year,b=f.map((function(e){return e.name})).join(", "),a='<div class="modal-container">\n        <div class="poster-thumb">\n          <picture>\n              <source\n              srcset="\n              '.concat(g[4].path," 1x,\n              ").concat(g[5].path,' 2x\n              "\n              media="(min-width: 1200px)"\n            />\n              <source\n              srcset="\n              ').concat(g[3].path," 1x,\n              ").concat(g[4].path,' 2x\n              "\n              media="(min-width: 768px)"\n            />\n              <source\n              srcset="\n              ').concat(g[3].path," 1x,\n              ").concat(g[4].path,' 2x\n              "\n              media="(max-width: 767px)"\n            />\n  \n            <img\n              class="movie-poster"\n              src="').concat(g[3].path,'"\n              alt="').concat(s,'"\n  \n              loading="lazy"\n            />\n          </picture>\n          <div class="trailer-overlay">\n          <button type="button" class="trailer-play-btn">\n          &#9655;\n              </button>\n          \n          </div>\n        </div>\n  \n        <div>\n          <table class="info">\n            <caption class="movie-title">\n            ').concat(s.toUpperCase(),'\n            </caption>\n            <tbody>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Vote / Votes</p>\n                </td>\n                <td class="description">\n                  <span class="vote">').concat(c,' </span> &nbsp;\n                  <span class="characteristic">/</span> ').concat(o,'\n                </td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Popularity</p>\n                </td>\n                <td class="description">').concat(l,'</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Original Title</p>\n                </td>\n                <td class="description">').concat(u.toUpperCase(),'</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Genre</p>\n                </td>\n                <td class="description">').concat(b,'</td>\n              </tr>\n            </tbody>\n          </table>\n          <h3 class="about">About</h3>\n          <p class="about-descr">\n            ').concat(m,'\n          </p>\n          <div class="buttons-wrapper">\n            <button\n              type="button"\n              class="button-modal add-to-watched"\n              data-action="add-to-watched"\n            >\n            add to watched</button\n            ><button\n              type="button"\n              class="button-modal add-to-queue"\n              data-action="add-to-queue"\n            >\n            add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n      '),n.insertAdjacentHTML("beforeend",a);var v=T.modalFilmWrapper.querySelector(".add-to-watched"),h=T.modalFilmWrapper.querySelector(".add-to-queue");return T.modalFilmWrapper.querySelector(".trailer-play-btn").addEventListener("click",p),v.addEventListener("click",t),h.addEventListener("click",r),d.fbFilmsData.getFilmById(A)})).then((function(e){var t=T.modalFilmWrapper.querySelector(".add-to-watched"),n=T.modalFilmWrapper.querySelector(".add-to-queue");e&&(null==e?void 0:e.id)&&((null==e?void 0:e.place)!=d.PLACE_W&&(null==e?void 0:e.place2)!=d.PLACE_W||(0,k.removeMod)(t,"watched"),(null==e?void 0:e.place)!=d.PLACE_Q&&(null==e?void 0:e.place2)!=d.PLACE_Q||(0,k.removeMod)(n,"queue"))})).catch(w.default)})),T.closeModalBtn.addEventListener("click",i)}()}();
//# sourceMappingURL=library.d521d599.js.map
