!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("4Nugj"),a("cP2Tz");var s=a("cP2Tz"),i=a("4Nugj"),c=new(0,s.SStorage);(0,i.getRefs)().libraryLogo.addEventListener("click",(function(){c.clear()})),a("KXFuB"),a("e3MQG"),a("cFCN7"),a("lx5Y0");var o=a("bpxeT"),l=a("2TvXO"),u=a("lRkNt"),d=a("5uvrp"),p=(i=a("4Nugj"),a("ilDAP")),f=(p=a("ilDAP"),a("kyTY7")),m=(f=a("kyTY7"),a("g1n8n")),g=(m=a("g1n8n"),(0,i.getRefs)());function b(){return(b=e(o)(e(l).mark((function t(){var n;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.fbFilmsAuth.isLogin){e.next=12;break}return e.prev=1,e.next=4,u.fbFilmsData.getFilms(u.PLACE_Q);case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}g.libraryBtnQ.addEventListener("click",(function(){g.libraryBtnW.classList.remove("current-btn"),g.libraryBtnQ.classList.add("current-btn"),d.fbFilmsAuth.isLogin&&(g.library.classList.add("min-height"),(0,p.spinnerOn)(),(0,m.emptyLibraryHide)(),g.library.innerHTML="",function(){return b.apply(this,arguments)}().then((function(e){return e.films.map((function(e){return{id:e.id,posters:e.posters,title:e.title,genres:e.genres,year:e.year,vote:e.vote}}))})).then((function(e){0!==e.length&&(e.forEach((function(e){1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])})),(0,p.spinnerOff)(),(0,f.renderMarkupList)(g.library,e,f.markupCreating)),0===e.length&&(g.library.classList.remove("min-height"),(0,p.spinnerOff)(),(0,m.emptyLibraryShow)())})))}));o=a("bpxeT"),l=a("2TvXO"),u=a("lRkNt"),d=a("5uvrp"),i=a("4Nugj"),p=a("ilDAP"),p=a("ilDAP"),f=a("kyTY7"),f=a("kyTY7"),m=a("g1n8n"),m=a("g1n8n");a("4zSSb"),a("53Mtm"),a("4zSSb");var h=(0,i.getRefs)();function v(){return y.apply(this,arguments)}function y(){return(y=e(o)(e(l).mark((function t(){var n;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.fbFilmsAuth.isLogin){e.next=12;break}return e.prev=1,e.next=4,u.fbFilmsData.getFilms(u.PLACE_W);case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function L(e){return e.forEach((function(e){1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])}))}h.libraryBtnW.addEventListener("click",(function(){h.libraryBtnW.classList.add("current-btn"),h.libraryBtnQ.classList.remove("current-btn"),d.fbFilmsAuth.isLogin&&(h.library.classList.add("min-height"),(0,p.spinnerOn)(),(0,m.emptyLibraryHide)(),h.library.innerHTML="",v().then((function(e){return e.films.map((function(e){return{id:e.id,posters:e.posters,title:e.title,genres:e.genres,year:e.year,vote:e.vote}}))})).then((function(e){0!==e.length&&(L(e),(0,p.spinnerOff)(),(0,f.renderMarkupList)(h.library,e,f.markupCreating)),0===e.length&&(h.library.classList.remove("min-height"),(0,p.spinnerOff)(),(0,m.emptyLibraryShow)())})))})),a("4zSSb");o=a("bpxeT"),l=a("2TvXO"),i=a("4Nugj");var x=a("aYHWX");var w=a("5ibPU");a("4DLKi");u=a("lRkNt");var k=new(0,a("glS4B").default),T=(0,i.getRefs)(),E=new(0,x.default),F=null;!function(){function t(){document.body.classList.toggle("modal-open"),T.modal.classList.toggle("is_hidden")}function n(e){k.filmID=F,k.showTrailer(),c()}function r(e){return a.apply(this,arguments)}function a(){return(a=e(o)(e(l).mark((function t(n){var r,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("remove-from-watched")){e.next=11;break}return e.next=3,E.getById(F);case 3:return r=e.sent,console.log("film1 =",r),e.next=7,u.fbFilmsData.writeTo(r,"WA");case 7:a=e.sent,console.log("result = ",a),n.target.textContent="film removed from watched",n.target.setAttribute("disabled","");case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function s(e){return i.apply(this,arguments)}function i(){return(i=e(o)(e(l).mark((function t(n){var r,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("remove-from-queue")){e.next=11;break}return e.next=3,E.getById(F);case 3:return r=e.sent,console.log("film1 =",r),e.next=7,u.fbFilmsData.writeTo(r,"QU");case 7:a=e.sent,console.log("result = ",a),n.target.textContent="film removed from queue",n.target.setAttribute("disabled","");case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function c(e){t()}function d(e){"Escape"===e.key&&(t(),document.removeEventListener("keydown",d))}function p(e){e.target===e.currentTarget&&(t(),T.modal.removeEventListener("click",p))}T.library.addEventListener("click",(function(e){var a=e.target.hasAttribute("data-id");if(F=e.target.dataset.id,e.target===e.currentTarget)return;if(!1===a)return;T.modalFilmWrapper.innerHTML="",document.addEventListener("keydown",d),T.modal.addEventListener("click",p),t(),E.getById(F).then((function(e){var t,a,i,c,o,l,u,d,p,f,m,g;e,t=T.modalFilmWrapper,c=(i=e).title,o=i.vote,l=i.votes,u=i.popularity,d=i.original_title,p=i.genres,f=i.about,i.poster_path,m=i.posters,i.year,g=p.map((function(e){return e.name})).join(", "),a='<div class="modal-container">\n        <div class="poster-thumb">\n          <picture>\n              <source\n              srcset="\n              '.concat(m[4].path," 1x,\n              ").concat(m[5].path,' 2x\n              "\n              media="(min-width: 1200px)"\n            />\n              <source\n              srcset="\n              ').concat(m[3].path," 1x,\n              ").concat(m[4].path,' 2x\n              "\n              media="(min-width: 768px)"\n            />\n              <source\n              srcset="\n              ').concat(m[3].path," 1x,\n              ").concat(m[4].path,' 2x\n              "\n              media="(max-width: 767px)"\n            />\n  \n            <img\n              class="movie-poster"\n              src="').concat(m[3].path,'"\n              alt="').concat(c,'"\n  \n              loading="lazy"\n            />\n          </picture>\n          <div class="trailer-overlay">\n          <button type="button" class="trailer-play-btn">\n          &#9655;\n              </button>\n          \n          </div>\n        </div>\n  \n        <div>\n          <table class="info">\n            <caption class="movie-title">\n            ').concat(c.toUpperCase(),'\n            </caption>\n            <tbody>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Vote / Votes</p>\n                </td>\n                <td class="description">\n                  <span class="vote">').concat(o,' </span> &nbsp;\n                  <span class="characteristic">/</span> ').concat(l,'\n                </td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Popularity</p>\n                </td>\n                <td class="description">').concat(u,'</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Original Title</p>\n                </td>\n                <td class="description">').concat(d.toUpperCase(),'</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Genre</p>\n                </td>\n                <td class="description">').concat(g,'</td>\n              </tr>\n            </tbody>\n          </table>\n          <h3 class="about">About</h3>\n          <p class="about-descr">\n            ').concat(f,'\n          </p>\n          <div class="buttons-wrapper">\n            <button\n              type="button"\n              class="button-modal remove-from-watched"\n              data-action="add-to-watched"\n            >\n            remove from Watched</button\n            ><button\n              type="button"\n              class="button-modal remove-from-queue"\n              data-action="add-to-queue"\n            >\n            remove from queue\n            </button>\n          </div>\n        </div>\n      </div>\n      '),t.insertAdjacentHTML("beforeend",a);var b=T.modalFilmWrapper.querySelector(".remove-from-watched"),h=T.modalFilmWrapper.querySelector(".remove-from-queue");T.modalFilmWrapper.querySelector(".trailer-play-btn").addEventListener("click",n),b.addEventListener("click",r),h.addEventListener("click",s)})).catch(w.default)})),T.closeModalBtn.addEventListener("click",c)}();new(0,a("glS4B").default)}();
//# sourceMappingURL=library.e5a4dd75.js.map
