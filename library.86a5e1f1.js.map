{"mappings":"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","sources":["src/library.js","src/js/renderMarkupFilmoteka/onClickLogoLibrary.js","src/js/renderMarkupLibrary/renderMarkupLibraryQ.js","src/js/renderMarkupLibrary/renderMarkupLibraryW.js","src/js/modals/modal-library.js","src/js/renderMarkupLibrary/renderModalLibraryMarkup.js"],"sourcesContent":["import { getRefs } from './js/refs';\nimport { SStorage } from './js/storage/sessionStorage';\nimport { onClickLogoLibrary } from './js/renderMarkupFilmoteka/onClickLogoLibrary';\nimport { changeMode } from './js/changeMode/changeMode';\nimport { buttonUp } from './js/scroll/button-up';\n\nimport { loginModal } from './js/firebaseFilm/loginModal';\nimport { needRegisterShow, needRegisterHide } from './js/errors/needRegister';\n\nimport { renderMarkupLibraryQ } from './js/renderMarkupLibrary/renderMarkupLibraryQ';\nimport { renderMarkupLibraryW } from './js/renderMarkupLibrary/renderMarkupLibraryW';\nimport { libraryFirstOpen } from './js/renderMarkupLibrary/renderMarkupLibraryW';\nimport { renderLogin } from './js/renderLogin/renderLogin';\n\nimport toggleModalLibrary from './js/modals/modal-library';\n\n\n","import { SStorage } from \"../storage/sessionStorage\";\nimport { getRefs } from \"../refs\";\n\nconst sStorage = new SStorage();\nconst refs = getRefs();\n\nrefs.libraryLogo.addEventListener('click', onClickLogoLibrary)\nexport function onClickLogoLibrary() {\n    sStorage.clear();\n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\n\n\n\nconst refs = getRefs();\n\nrefs.libraryBtnQ.addEventListener('click', renderMarkupLibraryQ);\n\n\n// загрузка по кнопке очередь\nexport function renderMarkupLibraryQ() {\n    \n  refs.libraryBtnW.classList.remove('current-btn');\n  refs.libraryBtnQ.classList.add('current-btn');\n  if (fbFilmsAuth.isLogin) {\n    refs.library.classList.add('min-height');\n    spinnerOn();\n    emptyLibraryHide();\n    refs.library.innerHTML = '';\n    getFilmFromQU().then(({ films }) => {\n      \n      const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n        {\n          id,\n          posters,\n          title,\n          genres,\n          year,\n          vote,\n        }\n      ));\n      return filmsProperties;\n    }).then((filmsProperties) => {\n      if (filmsProperties.length !== 0) {\n        makeNewArrProp(filmsProperties);\n        spinnerOff();\n        renderMarkupList(refs.library, filmsProperties, markupCreating);\n      };\n      if (filmsProperties.length === 0) {\n        refs.library.classList.remove('min-height');\n        spinnerOff();\n        emptyLibraryShow();\n      };\n    });\n  };\n};\n\n\nasync function getFilmFromQU() {\n  if (fbFilmsAuth.isLogin) {\n      try {\n        const filmsQ = await fbFilmsData.getFilms(PLACE_Q);\n      if (filmsQ) {\n        return filmsQ;\n        };\n      } catch (err) {\n        console.log(err);\n    };\n  };\n};\n\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};","import { fbFilmsData, PLACE_Q, PLACE_W } from \"../firebaseFilm/fbFilms\";\nimport { fbFilmsAuth } from \"../firebaseFilm/testAuth\";\nimport { getRefs } from \"../refs\";\nimport { spinnerOn } from \"../spiner/spiner\";\nimport { spinnerOff } from \"../spiner/spiner\";\nimport { markupCreating } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { renderMarkupList } from \"../renderMarkupFilmoteka/renderMarkup\";\nimport { emptyLibraryHide } from \"../errors/showAndHideErrors\";\nimport { emptyLibraryShow } from \"../errors/showAndHideErrors\";\nimport { renderLogin } from \"../renderLogin/renderLogin\";\nimport { authMy } from \"../firebaseFilm/fbInit\";\nimport { renderLogin } from \"../renderLogin/renderLogin\";\n\nconst refs = getRefs();\n\n\n// загрузка по кнопке смотреть\n\nrefs.libraryBtnW.addEventListener('click', renderMarkupLibraryW);\n\nexport function renderMarkupLibraryW() {\n    \n  refs.libraryBtnW.classList.add('current-btn');\n  refs.libraryBtnQ.classList.remove('current-btn');\n  if (fbFilmsAuth.isLogin) {\n    refs.library.classList.add('min-height');\n    spinnerOn();\n    emptyLibraryHide();\n    refs.library.innerHTML = '';\n    getFilmFromW().then(({ films }) => {\n      const filmsProperties = films.map(({ id, posters, title, genres, year, vote }) => (\n        {\n          id,\n          posters,\n          title,\n          genres,\n          year,\n          vote,\n        }\n      ));\n      return filmsProperties;\n    }).then((filmsProperties) => {\n      if (filmsProperties.length !== 0) {\n        makeNewArrProp(filmsProperties);\n        spinnerOff();\n        renderMarkupList(refs.library, filmsProperties, markupCreating);\n      };\n      if (filmsProperties.length === 0) {\n        refs.library.classList.remove('min-height');\n        spinnerOff();\n        emptyLibraryShow();\n      };\n    });\n  };\n};\n\n\nasync function getFilmFromW() {\n  if (fbFilmsAuth.isLogin) {\n      try {\n        const filmsW = await fbFilmsData.getFilms(PLACE_W);\n      if (filmsW) {\n        return filmsW;\n        };\n      } catch (err) {\n        console.log(err);\n    };\n  };\n};\n\n\n// вспомогательные функции\nexport function makeNewArrProp(arr) {\n  return arr.forEach(element => {\n    if (element.genres.length === 1) {\n      element.genres = [element.genres[0].name]\n    };\n    if (element.genres.length === 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name]\n    };\n    if (element.genres.length > 2) {\n      element.genres = [element.genres[0].name, element.genres[1].name, 'Other']\n    };\n    }); \n};\n\n","import { getRefs } from '../refs';\nimport FilmsData from '../moviesAPI/filmsData';\nimport { renderModalLibraryMarkup } from '../renderMarkupLibrary/renderModalLibraryMarkup';\nimport { markupModalLibraryCreating } from '../renderMarkupLibrary/renderModalLibraryMarkup';\nimport renderErrorModalMarkup from '../renderMarkupFilmoteka/renderErrorModalMarkup';\nimport { addMod, removeMod } from './modal-film-btn';\nimport { fbFilmsAuth } from '../firebaseFilm/testAuth';\nimport { fbFilmsData, PLACE_Q, PLACE_W } from '../firebaseFilm/fbFilms';\nimport TrailerApiService from './modal-trailer';\nimport { renderMarkupLibraryW } from '../renderMarkupLibrary/renderMarkupLibraryW';\nimport { renderMarkupLibraryQ } from '../renderMarkupLibrary/renderMarkupLibraryQ';\n\nconst trailerApiService = new TrailerApiService();\n\nconst refs = getRefs();\nconst filmsData = new FilmsData();\nlet filmObj = null;\nlet filmId = null;\n\nexport default function toggleModalLibrary() {\n  refs.library.addEventListener('click', openModalFilm);\n  refs.closeModalBtn.addEventListener('click', closeModal);\n\n  function openModalFilm(event) {\n    const hasId = event.target.hasAttribute('data-id');\n    filmId = event.target.dataset.id;\n    if (event.target === event.currentTarget) return;\n    else if (hasId === false) return;\n\n    refs.modalFilmWrapper.innerHTML = '';\n    document.addEventListener('keydown', closeModalOnEscape);\n    refs.modal.addEventListener('click', closeModalOnBackdrop);\n\n    toggleClasses();\n\n    filmsData\n      .getById(filmId)\n      .then(filmProperties => {\n        filmObj = filmProperties;\n        renderModalLibraryMarkup(\n          refs.modalFilmWrapper,\n          markupModalLibraryCreating(filmProperties)\n        );\n\n        const addToWatched =\n          refs.modalFilmWrapper.querySelector('.add-to-watched');\n        const addToQueue = refs.modalFilmWrapper.querySelector('.add-to-queue');\n        const trailerBtn =\n          refs.modalFilmWrapper.querySelector('.trailer-play-btn');\n\n        trailerBtn.addEventListener('click', onYouTubeBtnClick);\n        addToWatched.addEventListener('click', onClickBtnWatched);\n        addToQueue.addEventListener('click', onClickBtnQueue);\n        return fbFilmsData.getFilmById(filmId);\n      })\n      .then(filmFromData => {\n        const innerAddToWatched =\n          refs.modalFilmWrapper.querySelector('.add-to-watched');\n        const innerAddToQueue =\n          refs.modalFilmWrapper.querySelector('.add-to-queue');\n        if (filmFromData && filmFromData?.place) {\n          if (filmFromData.place == PLACE_W) {\n            removeMod(innerAddToWatched, 'watched');\n          }\n          if (filmFromData.place == PLACE_Q) {\n            removeMod(innerAddToQueue, 'queue');\n          }\n        }\n      })\n      .catch(renderErrorModalMarkup);\n  }\n\n  async function onClickBtnWatched(event) {\n    if (event.target.classList.contains('remove-from-watched')) {\n      const result = await fbFilmsData.removeFilm(filmId, 'WA');\n\n      addMod(event.target, 'watched');\n      renderMarkupLibraryW();\n    } else if (event.target.classList.contains('add-to-watched')) {\n      const film1 = await filmsData.getById(filmId);\n      const result = await fbFilmsData.writeTo(film1, 'WA');\n\n      removeMod(event.target, 'watched');\n      renderMarkupLibraryW();\n      if (event.target.nextSibling.classList.contains('remove-from-queue')) {\n        addMod(event.target.nextSibling, 'queue');\n      }\n    }\n  }\n\n  async function onClickBtnQueue(event) {\n    if (event.target.classList.contains('remove-from-queue')) {\n      const result = await fbFilmsData.removeFilm(filmId, 'QU');\n\n      addMod(event.target, 'queue');\n      renderMarkupLibraryQ();\n    } else if (event.target.classList.contains('add-to-queue')) {\n      const film1 = await filmsData.getById(filmId);\n      const result = await fbFilmsData.writeTo(film1, 'QU');\n\n      removeMod(event.target, 'queue');\n      renderMarkupLibraryQ();\n      if (\n        event.target.previousSibling.classList.contains('remove-from-watched')\n      ) {\n        addMod(event.target.previousSibling, 'watched');\n      }\n    }\n  }\n\n  function closeModal(event) {\n    toggleClasses();\n  }\n\n  function closeModalOnEscape(event) {\n    if (event.key !== 'Escape') return;\n\n    toggleClasses();\n    document.removeEventListener('keydown', closeModalOnEscape);\n  }\n\n  function closeModalOnBackdrop(event) {\n    if (event.target !== event.currentTarget) return;\n\n    toggleClasses();\n    refs.modal.removeEventListener('click', closeModalOnBackdrop);\n  }\n\n  function toggleClasses() {\n    document.body.classList.toggle('modal-open');\n    refs.modal.classList.toggle('is_hidden');\n  }\n\n  function onYouTubeBtnClick(event) {\n    trailerApiService.filmID = filmId;\n    trailerApiService.showTrailer();\n    closeModal();\n  }\n}\n\ntoggleModalLibrary();\n","export function renderModalLibraryMarkup(element, markupModalCreating) {\n  element.insertAdjacentHTML('beforeend', markupModalCreating);\n}\n\nexport function markupModalLibraryCreating({\n  title,\n  vote,\n  votes,\n  popularity,\n  original_title,\n  genres,\n  about,\n  poster_path,\n  posters,\n  year,\n}) {\n  const genre = genres.map(genres => genres.name).join(', ');\n\n  return `<div class=\"modal-container\">\n        <div class=\"poster-thumb\">\n          <picture>\n              <source\n              srcset=\"\n              ${posters[4].path} 1x,\n              ${posters[5].path} 2x\n              \"\n              media=\"(min-width: 1200px)\"\n            />\n              <source\n              srcset=\"\n              ${posters[3].path} 1x,\n              ${posters[4].path} 2x\n              \"\n              media=\"(min-width: 768px)\"\n            />\n              <source\n              srcset=\"\n              ${posters[3].path} 1x,\n              ${posters[4].path} 2x\n              \"\n              media=\"(max-width: 767px)\"\n            />\n  \n            <img\n              class=\"movie-poster\"\n              src=\"${posters[3].path}\"\n              alt=\"${title}\"\n  \n              loading=\"lazy\"\n            />\n          </picture>\n          <div class=\"trailer-overlay\">\n          <button type=\"button\" class=\"trailer-play-btn\">\n          &#9655;\n              </button>\n          \n          </div>\n        </div>\n  \n        <div>\n          <table class=\"info\">\n            <caption class=\"movie-title\">\n            ${title.toUpperCase()}\n            </caption>\n            <tbody>\n              <tr class=\"table-row\">\n                <td class=\"td\">\n                  <p class=\"characteristic\">Vote / Votes</p>\n                </td>\n                <td class=\"description\">\n                  <span class=\"vote\">${vote} </span> &nbsp;\n                  <span class=\"characteristic\">/</span> ${votes}\n                </td>\n              </tr>\n              <tr class=\"table-row\">\n                <td class=\"td\">\n                  <p class=\"characteristic\">Popularity</p>\n                </td>\n                <td class=\"description\">${popularity}</td>\n              </tr>\n              <tr class=\"table-row\">\n                <td class=\"td\">\n                  <p class=\"characteristic\">Original Title</p>\n                </td>\n                <td class=\"description\">${original_title.toUpperCase()}</td>\n              </tr>\n              <tr class=\"table-row\">\n                <td class=\"td\">\n                  <p class=\"characteristic\">Genre</p>\n                </td>\n                <td class=\"description\">${genre}</td>\n              </tr>\n            </tbody>\n          </table>\n          <h3 class=\"about\">About</h3>\n          <p class=\"about-descr\">\n            ${about}\n          </p>\n          <div class=\"buttons-wrapper\">\n            <button\n              type=\"button\"\n              class=\"button-modal add-to-watched\"\n              data-action=\"add-to-watched\"\n            >\n            add to watched</button\n            ><button\n              type=\"button\"\n              class=\"button-modal add-to-queue\"\n              data-action=\"add-to-queue\"\n            >\n            add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n      `;\n}\n"],"names":["parcelRequire","$cP2Tz","$969dddec52c446cb$var$sStorage","SStorage","$4Nugj","getRefs","libraryLogo","addEventListener","clear","$bpxeT","$ceab52ceef72b8da$var$refs","$ceab52ceef72b8da$export$46d4163198b706d5","libraryBtnW","classList","remove","libraryBtnQ","add","$5uvrp","fbFilmsAuth","isLogin","library","$ilDAP","spinnerOn","$g1n8n","emptyLibraryHide","innerHTML","$ceab52ceef72b8da$var$_getFilmFromQU","apply","this","arguments","$ceab52ceef72b8da$var$getFilmFromQU","then","param1","films","map","param","id","posters","title","genres","year","vote","filmsProperties","length","forEach","element","name","spinnerOff","$kyTY7","renderMarkupList","markupCreating","emptyLibraryShow","$parcel$interopDefault","$2TvXO","mark","_callee","filmsQ","$lRkNt","fbFilmsData","getFilms","PLACE_Q","_ctx","sent","console","log","t0","$e678080e9bbc4649$var$refs","$e678080e9bbc4649$export$da1b552666445dbb","$e678080e9bbc4649$var$_getFilmFromW","$e678080e9bbc4649$var$getFilmFromW","filmsW","PLACE_W","$61ab87be1e8cf96d$var$trailerApiService","default","$61ab87be1e8cf96d$var$refs","$61ab87be1e8cf96d$var$filmsData","$aYHWX","$61ab87be1e8cf96d$var$filmId","onClickBtnWatched","event","_onClickBtnWatched","film1","target","contains","removeFilm","$4DLKi","addMod","getById","writeTo","removeMod","nextSibling","onClickBtnQueue","_onClickBtnQueue","previousSibling","closeModal","toggleClasses","closeModalOnEscape","key","document","removeEventListener","closeModalOnBackdrop","currentTarget","modal","body","toggle","onYouTubeBtnClick","filmID","showTrailer","hasId","hasAttribute","dataset","modalFilmWrapper","filmProperties","markupModalCreating","votes","popularity","original_title","genres1","about","genre","poster_path","join","concat","path","toUpperCase","insertAdjacentHTML","addToWatched","querySelector","addToQueue","getFilmById","filmFromData","innerAddToWatched","innerAddToQueue","place","catch","$5ibPU","closeModalBtn","$61ab87be1e8cf96d$export$2e2bcd8739ae039"],"version":3,"file":"library.86a5e1f1.js.map"}