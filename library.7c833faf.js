!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("4Nugj"),a("cP2Tz");var i=a("cP2Tz"),s=a("4Nugj"),c=new(0,i.SStorage);(0,s.getRefs)().libraryLogo.addEventListener("click",(function(){c.clear()})),a("KXFuB"),a("e3MQG"),a("cFCN7"),a("lx5Y0");var o=a("lRkNt"),l=a("5uvrp"),d=(s=a("4Nugj"),a("ilDAP")),u=(a("ilDAP"),a("kyTY7")),p=(a("kyTY7"),a("g1n8n")),f=(a("g1n8n"),a("bpxeT")),m=a("2TvXO"),b=(o=a("lRkNt"),l=a("5uvrp"),s=a("4Nugj"),a("ilDAP"),d=a("ilDAP"),a("kyTY7"),u=a("kyTY7"),a("g1n8n"),p=a("g1n8n"),(0,s.getRefs)());function g(){b.libraryBtnW.classList.add("current-btn"),b.libraryBtnQ.classList.remove("current-btn"),l.fbFilmsAuth.isLogin&&(b.library.classList.add("min-height"),(0,d.spinnerOn)(),(0,p.emptyLibraryHide)(),b.library.innerHTML="",v(o.PLACE_W).then((function(e){return e.films.map((function(e){return{id:e.id,posters:e.posters,title:e.title,genres:e.genres,year:e.year,vote:e.vote}}))})).then((function(e){0!==e.length&&(y(e),(0,d.spinnerOff)(),(0,u.renderMarkupList)(b.library,e,u.markupCreating)),0===e.length&&(b.library.classList.remove("min-height"),(0,d.spinnerOff)(),(0,p.emptyLibraryShow)())})))}function v(e){return h.apply(this,arguments)}function h(){return(h=e(f)(e(m).mark((function t(n){var r;return e(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.fbFilmsAuth.isLogin){e.next=12;break}return e.prev=1,e.next=4,o.fbFilmsData.getFilms(n);case 4:if(!(r=e.sent)){e.next=7;break}return e.abrupt("return",r);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function y(e){return e.forEach((function(e){1===e.genres.length&&(e.genres=[e.genres[0].name]),2===e.genres.length&&(e.genres=[e.genres[0].name,e.genres[1].name]),e.genres.length>2&&(e.genres=[e.genres[0].name,e.genres[1].name,"Other"])}))}b.libraryBtnW.addEventListener("click",g);var L=(0,s.getRefs)();function w(){L.libraryBtnW.classList.remove("current-btn"),L.libraryBtnQ.classList.add("current-btn"),l.fbFilmsAuth.isLogin&&(L.library.classList.add("min-height"),(0,d.spinnerOn)(),(0,p.emptyLibraryHide)(),L.library.innerHTML="",v(o.PLACE_Q).then((function(e){return e.films.map((function(e){return{id:e.id,posters:e.posters,title:e.title,genres:e.genres,year:e.year,vote:e.vote}}))})).then((function(e){0!==e.length&&(y(e),(0,d.spinnerOff)(),(0,u.renderMarkupList)(L.library,e,u.markupCreating)),0===e.length&&(L.library.classList.remove("min-height"),(0,d.spinnerOff)(),(0,p.emptyLibraryShow)())})))}L.libraryBtnQ.addEventListener("click",w),a("4zSSb");f=a("bpxeT"),m=a("2TvXO"),s=a("4Nugj");var x=a("aYHWX");var k=a("5ibPU"),F=a("4DLKi");a("5uvrp");o=a("lRkNt");var T=new(0,a("glS4B").default),E=(0,s.getRefs)(),A=new(0,x.default),W=null;!function(){function t(e){return n.apply(this,arguments)}function n(){return(n=e(f)(e(m).mark((function t(n){var r,a;return e(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("remove-from-watched")){e.next=8;break}return e.next=3,o.fbFilmsData.removeFilm(W,"WA");case 3:e.sent,(0,F.addMod)(n.target,"watched"),g(),e.next=17;break;case 8:if(!n.target.classList.contains("add-to-watched")){e.next=17;break}return e.next=11,A.getById(W);case 11:return r=e.sent,e.next=14,o.fbFilmsData.writeTo(r,"WA");case 14:"WA"!==(null==(a=e.sent)?void 0:a.place)&&"WA"!==(null==a?void 0:a.place2)||(0,F.removeMod)(n.target,"watched"),g();case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function r(e){return a.apply(this,arguments)}function a(){return(a=e(f)(e(m).mark((function t(n){var r,a;return e(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.classList.contains("remove-from-queue")){e.next=8;break}return e.next=3,o.fbFilmsData.removeFilm(W,"QU");case 3:e.sent,(0,F.addMod)(n.target,"queue"),w(),e.next=18;break;case 8:if(!n.target.classList.contains("add-to-queue")){e.next=18;break}return e.next=11,A.getById(W);case 11:return r=e.sent,e.next=14,o.fbFilmsData.writeTo(r,"QU");case 14:"QU"===(null==(a=e.sent)?void 0:a.place)||null==a||a.place2,(0,F.removeMod)(n.target,"queue"),w();case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function i(e){l()}function s(e){"Escape"===e.key&&(l(),document.removeEventListener("keydown",s))}function c(e){e.target===e.currentTarget&&(l(),E.modal.removeEventListener("click",c))}function l(){document.body.classList.toggle("modal-open"),E.modal.classList.toggle("is_hidden")}function d(e){T.filmID=W,T.showTrailer(),i()}E.library.addEventListener("click",(function(e){var n=e.target.hasAttribute("data-id");if(W=e.target.dataset.id,e.target===e.currentTarget)return;if(!1===n)return;E.modalFilmWrapper.innerHTML="",document.addEventListener("keydown",s),E.modal.addEventListener("click",c),l(),A.getById(W).then((function(e){var n,a,i,s,c,l,u,p,f,m,b,g;e,n=E.modalFilmWrapper,s=(i=e).title,c=i.vote,l=i.votes,u=i.popularity,p=i.original_title,f=i.genres,m=i.about,i.poster_path,b=i.posters,i.year,g=f.map((function(e){return e.name})).join(", "),a='<div class="modal-container">\n        <div class="poster-thumb">\n          <picture>\n              <source\n              srcset="\n              '.concat(b[4].path," 1x,\n              ").concat(b[5].path,' 2x\n              "\n              media="(min-width: 1200px)"\n            />\n              <source\n              srcset="\n              ').concat(b[3].path," 1x,\n              ").concat(b[4].path,' 2x\n              "\n              media="(min-width: 768px)"\n            />\n              <source\n              srcset="\n              ').concat(b[3].path," 1x,\n              ").concat(b[4].path,' 2x\n              "\n              media="(max-width: 767px)"\n            />\n  \n            <img\n              class="movie-poster"\n              src="').concat(b[3].path,'"\n              alt="').concat(s,'"\n  \n              loading="lazy"\n            />\n          </picture>\n          <div class="trailer-overlay">\n          <button type="button" class="trailer-play-btn">\n          &#9655;\n              </button>\n          \n          </div>\n        </div>\n  \n        <div>\n          <table class="info">\n            <caption class="movie-title">\n            ').concat(s.toUpperCase(),'\n            </caption>\n            <tbody>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Vote / Votes</p>\n                </td>\n                <td class="description">\n                  <span class="vote">').concat(c,' </span> &nbsp;\n                  <span class="characteristic">/</span> ').concat(l,'\n                </td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Popularity</p>\n                </td>\n                <td class="description">').concat(u,'</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Original Title</p>\n                </td>\n                <td class="description">').concat(p.toUpperCase(),'</td>\n              </tr>\n              <tr class="table-row">\n                <td class="td">\n                  <p class="characteristic">Genre</p>\n                </td>\n                <td class="description">').concat(g,'</td>\n              </tr>\n            </tbody>\n          </table>\n          <h3 class="about">About</h3>\n          <p class="about-descr">\n            ').concat(m,'\n          </p>\n          <div class="buttons-wrapper">\n            <button\n              type="button"\n              class="button-modal add-to-watched"\n              data-action="add-to-watched"\n            >\n            add to watched</button\n            ><button\n              type="button"\n              class="button-modal add-to-queue"\n              data-action="add-to-queue"\n            >\n            add to queue\n            </button>\n          </div>\n        </div>\n      </div>\n      '),n.insertAdjacentHTML("beforeend",a);var v=E.modalFilmWrapper.querySelector(".add-to-watched"),h=E.modalFilmWrapper.querySelector(".add-to-queue");return E.modalFilmWrapper.querySelector(".trailer-play-btn").addEventListener("click",d),v.addEventListener("click",t),h.addEventListener("click",r),o.fbFilmsData.getFilmById(W)})).then((function(e){var t=E.modalFilmWrapper.querySelector(".add-to-watched"),n=E.modalFilmWrapper.querySelector(".add-to-queue");e&&(null==e?void 0:e.id)&&((null==e?void 0:e.place)!=o.PLACE_W&&(null==e?void 0:e.place2)!=o.PLACE_W||(0,F.removeMod)(t,"watched"),(null==e?void 0:e.place)!=o.PLACE_Q&&(null==e?void 0:e.place2)!=o.PLACE_Q||(0,F.removeMod)(n,"queue"))})).catch(k.default)})),E.closeModalBtn.addEventListener("click",i)}()}();
//# sourceMappingURL=library.7c833faf.js.map
